#! /usr/bin/env python3
import requests
import sys
from datetime import datetime
from time import time, sleep


def utc_offset():
    return round((datetime.now() - datetime.utcnow()).total_seconds() / 3600.0)


if len(sys.argv) > 1:
    url = sys.argv[1]
else:
    url = 'https://www.ibm.com'

while True:
    start_time = time()
    try:
        r = requests.get(url, timeout=5)
        result = str(r)
    except Exception as e:
        result = type(e).__name__
    elapsed = time() - start_time
    now = datetime.now()
    offset = utc_offset()
    print ('[{now}{offset:+03d}:00] {url} {result} {elapsed:.3f} seconds'
           .format(**locals()))
    sleep(1)
